#!/bin/bash

# GymMaster - –°–æ–∑–¥–∞–Ω–∏–µ APK —Ñ–∞–π–ª–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–µ—Ç APK —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ Android —Ç–µ–ª–µ—Ñ–æ–Ω

echo "üèãÔ∏è‚Äç‚ôÇÔ∏è GymMaster - –°–æ–∑–¥–∞–Ω–∏–µ APK —Ñ–∞–π–ª–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞"
echo "================================================="
echo ""

echo "üì± –°–æ–∑–¥–∞–Ω–∏–µ APK —Ñ–∞–π–ª–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω..."
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ EAS CLI
if ! command -v eas &> /dev/null; then
    echo "‚ùå EAS CLI –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º..."
    npm install -g @expo/eas-cli
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –≤ Expo
if ! eas whoami &> /dev/null; then
    echo "‚ùå –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ Expo. –í—ã–ø–æ–ª–Ω–∏—Ç–µ 'eas login'"
    echo "üí° –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è APK –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: npx expo build:android"
    exit 1
fi

echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
npm install

echo "üîß –°–æ–∑–¥–∞–Ω–∏–µ APK —Ñ–∞–π–ª–∞..."
echo "üì± –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-15 –º–∏–Ω—É—Ç..."

# –°–æ–∑–¥–∞–µ–º APK —Ñ–∞–π–ª
eas build --platform android --profile production --local

echo ""
echo "üéâ APK —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω!"
echo ""
echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:"
echo "1. APK —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ: ./android/app/build/outputs/apk/release/"
echo "2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ APK —Ñ–∞–π–ª –Ω–∞ –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω"
echo "3. –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –≤–∫–ª—é—á–∏—Ç–µ '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤'"
echo "4. –û—Ç–∫—Ä–æ–π—Ç–µ APK —Ñ–∞–π–ª –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
echo ""
echo "üì± GymMaster –≥–æ—Ç–æ–≤ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–∞ –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω!"
echo "üí™ –í–∞—à –ø—É—Ç—å –∫ —Å–∏–ª–µ –∏ –∑–¥–æ—Ä–æ–≤—å—é!"